<html>
    <head>
        <title>Sales</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- FONTS -->
        <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

        <!-- JS -->
        <script src="js/main.js"></script>
        <script src="js/sales.js"></script>

        <!-- CSS -->
        <link rel="stylesheet" type="text/css" href="css/base.css">
        <link rel="stylesheet" type="text/css" href="css/sales.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <body>
        <div class = "main">
            <div class = "header">
                <h1>Polly's Pizza: Inventory System</h1>
            </div>
            <div class = "lower">
                <div class = "menu">
                    <div class = "icons">
                        <ul class = "menu-icons">
                            <li>
                                <a href="/dashboard">
                                    <img class = "icon-1" src="res/dashboard-icon.svg" alt="Dashboard icon">
                                </a>
                            </li>
                            <li>
                                <a href="/inventory">
                                    <img class = "icon-2" src="res/inventory-icon.svg" alt="Inventory icon">
                                </a>
                            </li>
                            <li>
                                <a href="/sales">
                                    <img class = "icon-3" src="res/sales-icon.svg" alt="Sales icon">
                                </a>
                            </li>
                            <li>
                                <a href="/statistics">
                                    <img class = "icon-4" src="res/statistics-icon.svg" alt="Statistics icon">
                                </a>
                            </li>
                            <li>
                                <a href="/account">
                                    <img class = "icon-5" src="res/account-icon.svg" alt="Account icon">
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class = "menu-col">
                        <ul class = "menu-items">
                            <li>
                                <a href="/dashboard">Dashboard</a>
                            </li>
                            <li class = "menu-item-2">
                                <a href="/inventory">Inventory</a>
                            </li>
                            <li class = "menu-item-3">
                                <a href="/sales">Sales</a>
                            </li>
                            <div class = "selected"></div>
                            <li class = "menu-item-4">
                                <a href="/statistics">Statistics</a>
                            </li>
                            <li class = "menu-item-5">
                                <a href="/account">Account</a>
                            </li>
                            <form action="/logout" method="POST">
                                <input type="submit" id = "logout" class = "logout-button" value = "Logout"></form>
                            <a href = "/help" class = "help-button">How to use</a>
                        </ul>
                    </div>

                </div>
                
                <div class = "page">
                    <div class = "blank-row">
                        <% if (message && message.length > 0 ){%>
                            <div class = "error-row">
                                <span class="fa fa-exclamation-circle"></span>
                                <span class="msg_sales"><%= message %></span>
                            </div>
                         <% } %>  
                         
                         <% if (success && success.length > 0 ){%>
                            <div class = "succ-row">
                                <span class="fa fa-check-circle"></span>
                                <span class="msg_sales"><%= success %></span>
                            </div>
                         <% } %>    
                    </div>       
                    <h1 class = "sales-header">Sales</h1> 
                    <div class = "row-1">
                        <table class = "sales-table">
                            <tr>
                                <th class = "st-header-1">Date</th>
                                <th class = "st-header-2">Product</th>
                                <th class = "st-header-3">Price</th>
                                <th class = "st-header-4">Quantity</th>
                                <th class = "st-header-5">Total</th>
                                <th class = "st-header-6">Actions</th>
                            </tr>
                            <tr>
                                <% for (const sale of sales) { %>
                                <td><%=sale.DT%></td>
                                <td><%=sale.productName%></td>
                                <td><%=formatter.format(sale.Price)%></td>
                                <td><%=sale.sales_qty%></td>
                                <td><%=formatter.format(sale.totalPrice)%></td>
                                <td><button class = "edit-button" onclick = "window.location.href = '/deleteSale/<%= sale.salesID %>'">Delete</button></td>
                            </tr>
                            <%}%>
                        </table>
                    </div>
                    <div class = "footer">
                        <h1>Products</h1>
                        <input class = "add-product-button" type = "button" value = "Add Product" onclick="showAddProductPopup()">
                    </div>
                    <div class = "row-2">
                        <div class = "grid-container">
                            <% for (const inv of rows) { %>
                            <div class = "card-container">
                                <div class = "card item-1">
                                    <div class = "card-row-1">
                                        <img class = "item-image pizza1" src="uploads/<%=inv.imageProduct%>" alt="Pizza 1">
                                    </div>
                                    <div class = "card-row-2">
                                        <div class = "card-col-1">
                                            <p class = "item-name"><%=inv.productName%></p>
                                        </div>
                                    </div>
                                    <div class = "card-row-3">
                                        <a class = "edit-product" href = "/editProduct/<%=inv.productId %>">Edit/Delete</a>
                                        <a class = "edit-product" href = "/addSale/<%=inv.productId %>">Add Sale</a>
                                    </div>
                                </div>
                            </div>
                            <%}%>
                        </div>
                    </div>
                </div>
            </div>

            <div class = "add-product-popup">
                <form class = "add-product-popup-form" action="/addproduct" method="POST" enctype="multipart/form-data">
                    <button class = "close-popup" onclick="closeAddProductPopup()">X</button>
                    <h1>Add Product</h1>
                    <div class = "inner-add-form">
                        <label>Product Name</label>
                        <input required class = "add-input" type= "text" name="productName">
                        <label>Image</label>
                        <input required class = "image-input"  type = "file" name="myImage">
                        <label>Price</label>
                        <input required class = "add-input" type = "number" name="price" min="1" >
                        <label>Ingredients</label>
                        <div class = "ingredient-input">
                            <div class = "ingredient-name">
                                <label>Ingredient Name</label>
                                <select name = "ingredients[]" required class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                    <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]" class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                        <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]"  class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                    <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]" class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                        <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select><select name = "ingredients[]"  class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                    <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]" class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                        <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select><select name = "ingredients[]"  class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                    <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]" class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                        <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select><select name = "ingredients[]"  class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                    <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]" class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                        <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select><select name = "ingredients[]"  class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                    <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]" class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                        <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]"  class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                    <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]" class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                        <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]"  class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                    <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]" class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                        <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]"  class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                    <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]" class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                        <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]"  class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                    <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                                <select name = "ingredients[]" class = "ingredient-name add-input">
                                    <option value = "" disabled selected>Select</option>
                                    <% for (const inv of model) { %>
                                        <option value = "<%=inv.ingredients%>"><%=inv.ingredients%></option><%}%>
                                </select>
                            </div>
                            <div class = "ingredient-qty">
                                <label>Qty.</label>
                                <input name = "qty[]" required class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                <input name = "qty[]" class = "ingredient-add add-input" type= "number" min="1">
                                
                                
                            </div>
                        </div>
                        <div class = "submit-row">
                            <input class = "ingredient-submit submit-button" type = "submit" value = "Submit">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </body>
</html>